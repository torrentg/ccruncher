<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>CreditCruncher - Input file format</title>
    <link rel="stylesheet" href="ccruncher.css" type="text/css"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css">
        ul {
            margin-top: 0px;
            margin-bottom: 0px;
        }
        td.c1 {
            text-align: center;
            padding: 8px;
            width: 80px;
        }
        td.c2 {
            text-align: justify;
            padding: 8px;
        }
        td.c3 {
            text-align: center;
            padding: 8px;
            width: 60px;
            font-size: 80%;
            font-family: monospace;
        }
        @media print {
            td.c1, td.c2, td.c3
            {
                border: 1px solid gray;
            }
        }
    </style>
  </head>

  <body>
    <div id="main-container">
    <div id="page-header" style="background:#005080;">
      <table style="height:100%"><tr>
        <td style="vertical-align:middle;">
          <a href="index.html" style="text-decoration:none; color:white; font-size:26pt; font-weight:normal;">
            &nbsp;CCRUNCHER
          </a>
        </td>
        <td>
          <div style="height:50px; width:3px; border-left:solid 3px red; margin-left:5px; margin-right:5px; "></div>
        </td>
        <td style="vertical-align:middle; font-size:14pt; color:white">
          Open-Source Tool for<br/>Credit Risk Modeling
        </td>
      </tr></table>
    </div>

<!-- ==================================================== -->
<!--    introduction                                      -->
<!-- ==================================================== -->
    <h1>Input File Format</h1>

    <p>
      This document describes the xml input file for ccruncher-2.1.
      In the distribution package you can find the DTD, the XSD and some XML 
      samples into the $CCRUNCHER/samples directory. The xml used as
      example in this section can be found <a href="sample.xml">here</a>.
      <br /><br />
      The XML input file structure is as follows:
    </p>

    <pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;ccruncher&gt;
    &lt;title&gt;<i>your simulation title here</i>&lt;/title&gt;
    &lt;description&gt;<i>your simulation description here</i>&lt;/description&gt;
    <a href="#defines">&lt;defines&gt;</a>        ...        <a href="#defines">&lt;/defines&gt;</a>
    <a href="#parameters">&lt;paramaters&gt;</a>     ...     <a href="#parameters">&lt;/parameters&gt;</a>
    <a href="#interest">&lt;interest&gt;</a>       ...       <a href="#interest">&lt;/interest&gt;</a>
    <a href="#ratings">&lt;ratings&gt;</a>        ...        <a href="#ratings">&lt;/ratings&gt;</a>
    <a href="#transitions">&lt;transitions&gt;</a>    ...    <a href="#transitions">&lt;/transitions&gt;</a>
    <a href="#factors">&lt;factors&gt;</a>        ...        <a href="#factors">&lt;/factors&gt;</a>
    <a href="#correlations">&lt;correlations&gt;</a>   ...   <a href="#correlations">&lt;/correlations&gt;</a>
    <a href="#segmentations">&lt;segmentations&gt;</a>  ...  <a href="#segmentations">&lt;/segmentations&gt;</a>
    <a href="#portfolio">&lt;portfolio&gt;</a>      ...      <a href="#portfolio">&lt;/portfolio&gt;</a>
  &lt;/ccruncher&gt;
    </pre>

    <p>
      The encoding attribute can be one of these values: 
      UTF-8, UTF-16, ISO-8859-1, US-ASCII. Take into account that 
      XML is case-sensitive. Title and description tags are optional. 
    </p>

    <p>
      Some configuration options are mutually exclusive. For the configuration 
      options for which this occurs, please see the <a href="#notes">additional 
      notes</a> for suggestions of use.
    </p>

<!-- ==================================================== -->
<!--    defines section                                   -->
<!-- ==================================================== -->
    <a name="defines"></a>
    <h2>Section Defines</h2>

    <p>
      This section allows you to define identifiers with associated values. 
      In the rest of the file you can refer to these values using the identifier preceded 
      by '$'. This feature is useful when simulating the same file repeatedly 
      varying slightly the parameters as in the case of sensitivity analysis. 
      In these cases, the use of defines combined with the command line argument 
      '-D' allows to use the same file without having to modify it each time. 
      This section is optional. 
    </p>

    <h3>Example</h3>

    <pre>

  &lt;defines&gt;
    &lt;define name="numsims" value="30000"/&gt;
    &lt;define name="ndf" value="5"/&gt;
  &lt;/defines&gt;
    </pre>

    <h3>Define Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">name</td>
        <td class="c2">
          Define identifier. Any occurrence of this identifier preceded by '$' 
          (eg. $numsims) in the configuration file will be replaced by its value (eg. 30000). 
          The define name can only consist of letters and numbers.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">value</td>
        <td class="c2">
          Value used to replace the define identifier. <br/>
          You can put any value that does not contain XML special characters (&lt; &amp; &gt; &quot; &apos;).
        </td>
        <td class="c3">string</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    parameters section                                -->
<!-- ==================================================== -->
    <a name="parameters"></a>
    <h2>Section Parameters</h2>

    <p>
      This section shows the parameters of the problem that needs to
      be solved. The list can be delivered in any order.
    </p>

    <h3>Example</h3>

    <pre>

  &lt;parameters&gt;
    &lt;parameter name="time.0" value="18/10/2009"/&gt;
    &lt;parameter name="time.T" value="15/07/2015"/&gt;
    &lt;parameter name="stopcriteria.maxiterations" value="$numsims"/&gt;
    &lt;parameter name="stopcriteria.maxseconds" value="3600"/&gt;
    &lt;parameter name="copula.type" value="t($ndf)"/&gt;
    &lt;parameter name="rng.seed" value="0"/&gt;
    &lt;parameter name="montecarlo.antithetic" value="true"/&gt;
    &lt;parameter name="portfolio.onlyActiveObligors" value="true"/&gt;
  &lt;/parameters&gt;
    </pre>

    <h3>Parameters List</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">time.0</td>
        <td class="c2">
          Starting date of the simulation. Interest curve, debtors' rating, 
          transition matrix and default probabilities functions are relative to 
          this date. The format of this attribute is: DD/MM/YYYY.
        </td>
        <td class="c3">date</td>
      </tr>
      <tr class="a">
        <td class="c1">time.T</td>
        <td class="c2">
          Ending date of the simulation. Portfolio credit risk is computed at this date. 
          The format of this attribute is: DD/MM/YYYY.
        </td>
        <td class="c3">date</td>
      </tr>
      <tr class="b">
        <td class="c1">stopcriteria.maxiterations</td>
        <td class="c2">
          Maximum number of iterations performed by the Monte Carlo algorithm.
          If it has value 0, this stop criteria is not considered. ccruncher stops when a
          stop criteria is achieved.
        </td>
        <td class="c3">int</td>
      </tr>
      <tr class="a">
        <td class="c1">stopcriteria.maxseconds</td>
        <td class="c2">
          Maximum number of seconds that the current execution can last.
          If it has value 0, this stop criteria is not considered. ccruncher stops when
          a stop criteria is achieved.
        </td>
        <td class="c3">int</td>
      </tr>
      <tr class="b">
        <td class="c1">copula.type</td>
        <td class="c2">
          Type of copula used to generate correlated default times. 
          Two families of copulas are implemented: 
          <ul>
            <li>
              gaussian: the gaussian copula
            </li>
            <li>
              t(n): the t-Student copula, where <i>n &ge; 2</i> is the number of 
              degrees of freedom
            </li>
          </ul>
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">rng.seed</td>
        <td class="c2">
          Seed used to initialize a random number generator. If it has value 0
          then a random number based on the current time will be used.
          This parameter is optional. Default value is 0.
        </td>
        <td class="c3">long</td>
      </tr>
      <tr class="b">
        <td class="c1">montecarlo.antithetic</td>
        <td class="c2">
          Specifies whether or not to use a variance reduction technique 
          named antithetic. If you have doubts about setting this 
          parameter then set it to 'false', otherwise set it to 'true'.
        </td>
        <td class="c3">boolean</td>
      </tr>
      <tr class="a">
        <td class="c1">portfolio.onlyActiveObligors</td>
        <td class="c2">
          If you want to simulate all the obligors, including obligors without
          risk along the time range, type 'false'. If you want to simulate
          only active obligors along the simulation period type 'true'. We 
          suggest writing always 'true'.
        </td>
        <td class="c3">boolean</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    interest section                                 -->
<!-- ==================================================== -->
    <a name="interest"></a>
    <h2>Section Interest</h2>

    <p>
      This section shows how to define the interest rates curve used to 
      compute the Current Net Value of simulated losses. If you skip this 
      section then the amounts will not be updated to their Current Net Value.
      In the euro area you can obtain these values from 
      <a href="http://www.ecb.int/stats/money/yc/html/index.en.html">ECB</a>.
    </p>

    <h3>Example</h3>

    <pre>

  &lt;interest type="compound"&gt;
    &lt;rate t="0D" r="0.0%"/&gt;
    &lt;rate t="1M" r="4.0%"/&gt;
    &lt;rate t="2M" r="4.1%"/&gt;
    &lt;rate t="3M" r="4.5%"/&gt;
    &lt;rate t="6M" r="4.55%"/&gt;
    &lt;rate t="1Y" r="4.8%"/&gt;
    &lt;rate t="2Y" r="4.9%"/&gt;
    &lt;rate t="5Y" r="5.0%"/&gt;
    &lt;rate t="10Y" r="5.2%"/&gt;
  &lt;/interest&gt;
    </pre>

    <h3>Interest Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">type</td>
        <td class="c2">
          Determine how to apply interest curve. Allowed values are: 'simple', 'compound' 
          and 'continuous'. This attribute is optional. Default value is 'compound'.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">spline</td>
        <td class="c2">
          Indicates how curve is interpolated. Allowed values are: 'linear' and 'cubic'.
          This attribute is optional. Default value is 'linear'.
        </td>
        <td class="c3">string</td>
      </tr>
    </table>

    <h3>Rate attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">t</td>
        <td class="c2">
          Time. Can be a date (in format 'DD/MM/YYYY') or an 
          increment from the initial date <i>time.0</i>. Use suffix 'D'
          to indicate days (eg. 3D), suffix 'M' to indicate months (eg. 6M) and  
          suffix 'Y' to indicate years (eg. 15Y). If a value between two given dates is 
          needed, the value will be linearly interpolated.
        </td>
        <td class="c3">date <br/>int[DMY]</td>
      </tr>
      <tr class="a">
        <td class="c1">r</td>
        <td class="c2">
          Interest rate at time t. It is a value between -0.5 and 1.0. The value
          can be set as percentage (eg. 5.3%) or absolute value (eg. 0.053).
        </td>
        <td class="c3">double</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    ratings section                                   -->
<!-- ==================================================== -->
    <a name="ratings"></a>
    <h2>Section Ratings</h2>

    <p>
      This section shows how to define the credit ratings. A minimum of two  
      ratings is required (a non-default rating and a default rating). 
      The maximum number of ratings is 256.
    </p>

    <h3>Example</h3>

    <pre>

  &lt;ratings&gt;
    &lt;rating name="AAA" description="prime"/&gt;
    &lt;rating name="AA" description="high grade"/&gt;
    &lt;rating name="A" description="upper medium grade"/&gt;
    &lt;rating name="BBB" description="lower medium grade"/&gt;
    &lt;rating name="BB" description="non investment grade speculative"/&gt;
    &lt;rating name="B" description="highly speculative"/&gt;
    &lt;rating name="CCC" description="extremely speculative"/&gt;
    &lt;rating name="D" description="in default"/&gt;
  &lt;/ratings&gt;
    </pre>

    <h3>Rating Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">name</td>
        <td class="c2">
          Credit rating identifier. All references to a credit rating, eg. obligor rating, 
          are made using this value. Include default rating in this list.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">description</td>
        <td class="c2">
          Credit rating description. This attribute is optional.
        </td>
        <td class="c3">string</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    transition matrix section                         -->
<!-- ==================================================== -->
    <a name="transitions"></a>
    <h2>Section Transition Matrix</h2>

    <p>
      This section shows how to define the transition matrix. ccruncher always
      checks that the sum of elements of each row is 1.0. Also, ccruncher checks
      that only one row with all probability concentrated in a unique
      element exists. The number of elements to be established is NxN, where N is the 
      number of credit ratings. Alternatively, you can define the default probability
      functions instead of a transition matrix. See <a href="#notes">additional notes</a> 
      for more information.
	</p>

    <h3>Example</h3>

    <pre>

  &lt;transitions period="12"&gt;
    &lt;transition from="AAA" to="AAA" value="92.83%" /&gt;
    &lt;transition from="AAA" to="AA" value="6.5%" /&gt;
    &lt;transition from="AAA" to="A" value="0.56%" /&gt;
    &lt;transition from="AAA" to="BBB" value="0.06%" /&gt;
    &lt;transition from="AAA" to="BB" value="0.05%" /&gt;
    &lt;transition from="AAA" to="B" value="0.0%" /&gt;
    &lt;transition from="AAA" to="CCC" value="0.0%" /&gt;
    &lt;transition from="AAA" to="D" value="0.0%" /&gt;
    &lt;transition from="AA" to="AAA" value="0.63%" /&gt;
    &lt;transition from="AA" to="AA" value="91.87%" /&gt;
    &lt;transition from="AA" to="A" value="6.64%" /&gt;
    &lt;transition from="AA" to="BBB" value="0.65%" /&gt;
    &lt;transition from="AA" to="BB" value="0.06%" /&gt;
    &lt;transition from="AA" to="B" value="0.11%" /&gt;
    &lt;transition from="AA" to="CCC" value="0.04%" /&gt;
    &lt;transition from="AA" to="D" value="0.0%" /&gt;
    &lt;transition from="A" to="AAA" value="0.08%" /&gt;
    &lt;transition from="A" to="AA" value="2.26%" /&gt;
    &lt;transition from="A" to="A" value="91.65%" /&gt;
    &lt;transition from="A" to="BBB" value="5.11%" /&gt;
    &lt;transition from="A" to="BB" value="0.61%" /&gt;
    &lt;transition from="A" to="B" value="0.23%" /&gt;
    &lt;transition from="A" to="CCC" value="0.02%" /&gt;
    &lt;transition from="A" to="D" value="0.04%" /&gt;
    &lt;transition from="BBB" to="AAA" value="0.05%" /&gt;
    &lt;transition from="BBB" to="AA" value="0.27%" /&gt;
    &lt;transition from="BBB" to="A" value="5.84%" /&gt;
    &lt;transition from="BBB" to="BBB" value="87.76%" /&gt;
    &lt;transition from="BBB" to="BB" value="4.74%" /&gt;
    &lt;transition from="BBB" to="B" value="0.98%" /&gt;
    &lt;transition from="BBB" to="CCC" value="0.15%" /&gt;
    &lt;transition from="BBB" to="D" value="0.21%" /&gt;
    &lt;transition from="BB" to="AAA" value="0.04%" /&gt;
    &lt;transition from="BB" to="AA" value="0.11%" /&gt;
    &lt;transition from="BB" to="A" value="0.64%" /&gt;
    &lt;transition from="BB" to="BBB" value="7.85%" /&gt;
    &lt;transition from="BB" to="BB" value="81.13%" /&gt;
    &lt;transition from="BB" to="B" value="8.27%" /&gt;
    &lt;transition from="BB" to="CCC" value="0.89%" /&gt;
    &lt;transition from="BB" to="D" value="1.07%" /&gt;
    &lt;transition from="B" to="AAA" value="0.0%" /&gt;
    &lt;transition from="B" to="AA" value="0.11%" /&gt;
    &lt;transition from="B" to="A" value="0.3%" /&gt;
    &lt;transition from="B" to="BBB" value="0.42%" /&gt;
    &lt;transition from="B" to="BB" value="6.75%" /&gt;
    &lt;transition from="B" to="B" value="83.08%" /&gt;
    &lt;transition from="B" to="CCC" value="3.86%" /&gt;
    &lt;transition from="B" to="D" value="5.48%" /&gt;
    &lt;transition from="CCC" to="AAA" value="0.19%" /&gt;
    &lt;transition from="CCC" to="AA" value="0.0%" /&gt;
    &lt;transition from="CCC" to="A" value="0.38%" /&gt;
    &lt;transition from="CCC" to="BBB" value="0.75%" /&gt;
    &lt;transition from="CCC" to="BB" value="2.44%" /&gt;
    &lt;transition from="CCC" to="B" value="12.03%" /&gt;
    &lt;transition from="CCC" to="CCC" value="60.71%" /&gt;
    &lt;transition from="CCC" to="D" value="23.5%" /&gt;
    &lt;transition from="D" to="AAA" value="0.0%" /&gt;
    &lt;transition from="D" to="AA" value="0.0%" /&gt;
    &lt;transition from="D" to="A" value="0.0%" /&gt;
    &lt;transition from="D" to="BBB" value="0.0%" /&gt;
    &lt;transition from="D" to="BB" value="0.0%" /&gt;
    &lt;transition from="D" to="B" value="0.0%" /&gt;
    &lt;transition from="D" to="CCC" value="0.0%" /&gt;
    &lt;transition from="D" to="D" value="100%" /&gt;
  &lt;/transitions&gt;
    </pre>

	<p>
	  The above matrix is the S&amp;P 1-year transition matrix which is adjusted 
	  for unrated bonds and covers the period between 01-Jan-1981 and 31-Dec-1998.
	  It has been extracted from <a href="http://web.sakarya.edu.tr/~adurmus/basel_II/SSRN-id252517%20rating.pdf">Estimating Credit Rating Transition Probabilities for Corporate Bonds</a>.
	</p>

    <h3>Transitions Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">period</td>
        <td class="c2">
          Number of months covered by the transition matrix. Usually the
          transition matrix covers 1 year, and in such case, set the value to 12. 
        </td>
        <td class="c3">int</td>
      </tr>
    </table>

    <h3>Transition Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">from</td>
        <td class="c2">
          Initial credit rating. This value must be a credit rating identifier, see 
          'name' attribute in the credit rating tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">to</td>
        <td class="c2">
          Final credit rating. This value must be a credit rating identifier, see 
          'name' attribute in the credit rating tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="b">
        <td class="c1">value</td>
        <td class="c2">
          Probability for credit rating migration and must have a value between 0 and 1.
          The value can be set as percentage (eg. 5.3%) or absolute value (eg. 0.053).
        </td>
        <td class="c3">double</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    factors section                                   -->
<!-- ==================================================== -->
    <a name="factors"></a>
    <h2>Section Factors</h2>

    <p>
      This section shows how to define the factors. A minimum of one factor
      is required. The maximum number of factors is 256.
    </p>

    <h3>Example</h3>

    <pre>

  &lt;factors&gt;
    &lt;factor name="S1" loading="15.1%" description="Consumer/service sector"/&gt;
    &lt;factor name="S2" loading="17.9%" description="Forest/building products"/&gt;
    &lt;factor name="S3" loading="17.5%" description="High technology"/&gt;
    &lt;factor name="S4" loading="12.8%" description="Utilities"/&gt;
    &lt;factor name="S5" loading="15.0%" description="Other sectors"/&gt;
  &lt;/factors&gt;
    </pre>

    <h3>Factor Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">name</td>
        <td class="c2">
          Factor identifier. All references to a factor, eg. obligor 
          factor, are made using this value.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">loading</td>
        <td class="c2">
          Factor loading value (<i>w<sub>i</sub></i> in the 
          <a href="technical.html#multifactor-model">multi-factor model</a>). 
          A value in the range [0%,100%].
          The value can be set as percentage (eg. 5.3%) or absolute 
          value (eg. 0.053).
        </td>
        <td class="c3">double</td>
      </tr>
      <tr class="b">
        <td class="c1">description</td>
        <td class="c2">
          Factor description. This attribute is optional.
        </td>
        <td class="c3">string</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    correlations section                              -->
<!-- ==================================================== -->
    <a name="correlations"></a>
    <h2>Section Correlations</h2>

    <p>
      This section shows how to define the correlation matrix between 
      factors, <i>R</i> in the <a href="technical.html#multifactor-model">multi-factor model</a>. 
      The diagonal values are always <i>1</i> and don't need to be specified.
      The non-diagonal elements are the correlation matrix coefficients 
      You only need to set up the upper triangle elements. 
      The number of elements to set up is <i>(numfactors-1) x numfactors / 2</i>.
      If you only have <i>1</i> factor you can set <code>&lt;correlations/&gt;</code> and
      jump to the following section.
    </p>

    <h3>Example</h3>

    <pre>

  &lt;correlations&gt;
    &lt;correlation factor1="S1" factor2="S2" value="6.2%"/&gt;
    &lt;correlation factor1="S1" factor2="S3" value="8.6%"/&gt;
    &lt;correlation factor1="S1" factor2="S4" value="3.9%"/&gt;
    &lt;correlation factor1="S1" factor2="S5" value="9.1%"/&gt;
    &lt;correlation factor1="S2" factor2="S3" value="6.3%"/&gt;
    &lt;correlation factor1="S2" factor2="S4" value="10.2%"/&gt;
    &lt;correlation factor1="S2" factor2="S5" value="8.8%"/&gt;
    &lt;correlation factor1="S3" factor2="S4" value="7.3%"/&gt;
    &lt;correlation factor1="S3" factor2="S5" value="7.1%"/&gt;
    &lt;correlation factor1="S4" factor2="S5" value="6.4%"/&gt;
  &lt;/correlations&gt;
    </pre>

    <h3>Correlation Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">factor1</td>
        <td class="c2">
          First factor.
          This value must be a factor identifier, see 'name' attribute in factor tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">factor2</td>
        <td class="c2">
          Second factor.
          This value must be a factor identifier, see 'name' attribute in factor tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="b">
        <td class="c1">value</td>
        <td class="c2">
          Correlation between factor1 and factor2. A value in the range [-100%,+100%]. 
          The value can be set as percentage (eg. 5.3%) or absolute 
          value (eg. 0.053).
        </td>
        <td class="c3">double</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    segmentations section                             -->
<!-- ==================================================== -->
    <a name="segmentations"></a>
    <h2>Section Segmentations</h2>

    <p>
      This section shows how to define portfolio segmentations. Segmentations
      allow you to analyze your portfolio's risk according to a hierarchical organization
      or another type of segmentation. A segmentation is composed of segments.
      There are 2 types of segmentations:
    </p>
    <ul>
      <li>obligor segmentations, eg. sector, obligor size, initial credit rating, etc.</li>
      <li>asset segmentations, eg. products, branch where the contract is made, etc.</li>
    </ul> 
    <p>
      All segmentations must be complete, so that an element belongs to only one segment and 
      the union of all segments constitutes the whole portfolio. Every segmentation has 
      a segment named 'unassigned' defined in an implicit way. If a obligor (or an asset)
      does not belong to any segment, then it is considered part of the 'unassigned' segment.
      The maximum number of segments in a segmentation is 65535.
    </p>

    <h3>Example</h3>

    <pre>

  &lt;segmentations&gt;
    &lt;segmentation name="portfolio" components="asset"/&gt;
    &lt;segmentation name="sectors" components="obligor"&gt;
      &lt;segment name="S1"/&gt;
      &lt;segment name="S2"/&gt;
      &lt;segment name="S3"/&gt;
      &lt;segment name="S4"/&gt;
      &lt;segment name="S5"/&gt;
    &lt;/segmentation&gt;
    &lt;segmentation name="size" components="obligor"&gt;
      &lt;segment name="large"/&gt;
      &lt;segment name="medium"/&gt;
      &lt;segment name="small"/&gt;
    &lt;/segmentation&gt;
    &lt;segmentation name="products" components="asset"&gt;
      &lt;segment name="bond"/&gt;
      &lt;segment name="loan"/&gt;
      &lt;segment name="lease"/&gt;
      &lt;segment name="mortgage"/&gt;
      &lt;segment name="line of credit"/&gt;
      &lt;segment name="bank guarantee"/&gt;
    &lt;/segmentation&gt;
    &lt;segmentation name="offices" components="asset"&gt;
      &lt;segment name="0001"/&gt;
      &lt;segment name="0002"/&gt;
      &lt;segment name="0003"/&gt;
      &lt;segment name="0004"/&gt;
    &lt;/segmentation&gt;
  &lt;/segmentations&gt;
    </pre>

    <h3>Segmentation Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">name</td>
        <td class="c2">
          Segmentation identifier. All references to a segmentation, eg. belongs-to tag,
          are made using this value.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">components</td>
        <td class="c2">
          Type of segments. Accepted values are 'obligor' 
          and 'asset'.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="b">
        <td class="c1">enabled</td>
        <td class="c2">
          Indicates if this segmentation is enabled (ie. losses will be computed for 
          this segmentation). This attribute is optional. Default value is 
          <code>true</code>.
        </td>
        <td class="c3">boolean</td>
      </tr>
    </table>

    <h3>Segment Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">name</td>
        <td class="c2">
          Segment name. Different segmentations can have segments with
          the same name. All references to a segment, eg. belongs-to tag,
          are made using this value and always in conjunction with the segmentation. 
          If a segmentation doesn't have any segments, all the elements belong to
          the 'unassigned' segment.
        </td>
        <td class="c3">string</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    portfolio section                                 -->
<!-- ==================================================== -->
    <a name="portfolio"></a>
    <h2>Section Portfolio</h2>

    <p>
      This section shows how to define the portfolio. 
      A portfolio is a set of assets, where assets are grouped by obligor 
      (with a maximum of 65535 assets per obligor).
      The description of each asset is done by listing the expected exposures 
      and recovery rates in case of default. 
    </p>
    <p>
      Recovery can be defined at 3 different levels: obligor, asset and data value. 
      When a default occurs at time t, we get the recovery at time <i>t</i> (or the closest 
      date above). If this recovery is not reported, we get the asset recovery. If 
      this recovery is not reported, we get the obligor recovery. In the obligor 
      level, the value is shared by all assets that have not defined a recovery 
      at default time. 
    </p>

    <h3>Example</h3>

    <pre>

  &lt;portfolio&gt;
    &lt;obligor rating="A" factor="S1" id="000001"&gt;
      &lt;belongs-to segmentation="sectors" segment="S1"/&gt;
      &lt;belongs-to segmentation="size" segment="medium"/&gt;
      &lt;asset id="op1" date="01/01/2005" recovery="80%"&gt;
        &lt;belongs-to segmentation="products" segment="bond"/&gt;
        &lt;belongs-to segmentation="offices" segment="0001"/&gt;
        &lt;data&gt;
          &lt;values t="01/06/2005" exposure="2000.0" /&gt;
          &lt;values t="01/06/2006" exposure="1900.0" /&gt;
          &lt;values t="01/06/2007" exposure="1800.0" /&gt;
          &lt;values t="01/06/2008" exposure="1700.0" /&gt;
          &lt;values t="01/06/2009" exposure="1600.0" /&gt;
          &lt;values t="01/06/2010" exposure="1500.0" /&gt;
          &lt;values t="01/06/2011" exposure="1400.0" /&gt;
          &lt;values t="01/06/2012" exposure="1300.0" /&gt;
          &lt;values t="01/06/2013" exposure="1200.0" /&gt;
          &lt;values t="01/06/2014" exposure="1100.0" /&gt;
        &lt;/data&gt;
      &lt;/asset&gt;
      &lt;asset id="op2" date="01/06/2008"&gt;
        &lt;belongs-to segmentation="offices" segment="0004"/&gt;
        &lt;belongs-to segmentation="products" segment="bond"/&gt;
        &lt;data&gt;
          &lt;values t="01/07/2009" exposure="4400.0" recovery="75%" /&gt;
          &lt;values t="01/07/2011" exposure="3920.0" recovery="70%" /&gt;
          &lt;values t="01/07/2013" exposure="3340.0" recovery="65%" /&gt;
          &lt;values t="01/07/2015" exposure="2960.0" recovery="60%" /&gt;
          &lt;values t="01/07/2017" exposure="2480.0" recovery="55%" /&gt;
        &lt;/data&gt;
      &lt;/asset&gt;
    &lt;/obligor&gt;
    &lt;obligor rating="B" factor="S2" id="000002" recovery="20%"&gt;
      &lt;belongs-to segmentation="sectors" segment="S2"/&gt;
      &lt;belongs-to segmentation="size" segment="large"/&gt;
      &lt;asset id="op3" date="01/06/2003"&gt;
        &lt;belongs-to segmentation="offices" segment="0003"/&gt;
        &lt;belongs-to segmentation="products" segment="bond"/&gt;
        &lt;data&gt;
          &lt;values t="01/01/2005" exposure="1750.0" /&gt;
          &lt;values t="01/06/2007" exposure="1600.0" /&gt;
          &lt;values t="01/01/2009" exposure="1450.0" /&gt;
          &lt;values t="01/06/2011" exposure="1300.0" /&gt;
          &lt;values t="01/01/2013" exposure="1150.0" /&gt;
        &lt;/data&gt;
      &lt;/asset&gt;
    &lt;/obligor&gt;
    &lt;obligor rating="CCC" factor="S2" id="000003"&gt;
      &lt;belongs-to segmentation="sectors" segment="S2"/&gt;
      &lt;belongs-to segmentation="size" segment="medium"/&gt;
      &lt;asset id="op4" date="01/01/1999" recovery="beta(2.5,2.7)"&gt;
        &lt;belongs-to segmentation="offices" segment="0003"/&gt;
        &lt;belongs-to segmentation="products" segment="bond"/&gt;
        &lt;data&gt;
          &lt;values t="01/01/2000" exposure="2400.0" /&gt;
          &lt;values t="01/01/2001" exposure="2300.0" /&gt;
          &lt;values t="01/01/2002" exposure="2200.0" /&gt;
          &lt;values t="01/01/2003" exposure="2100.0" /&gt;
          &lt;values t="01/01/2004" exposure="lognormal(6.5,1.0)" /&gt;
          &lt;values t="01/01/2005" exposure="1900.0" /&gt;
          &lt;values t="01/01/2006" exposure="exponential(1800.0)" /&gt;
          &lt;values t="01/01/2007" exposure="1700.0" /&gt;
          &lt;values t="01/01/2008" exposure="uniform(1500.0,1700.0)" /&gt;
          &lt;values t="01/01/2009" exposure="1500.0" /&gt;
          &lt;values t="01/01/2010" exposure="gamma(2800.0,0.5)" /&gt;
          &lt;values t="01/01/2011" exposure="1300.0" /&gt;
          &lt;values t="01/01/2012" exposure="normal(1200.0,100.0)" /&gt;
          &lt;values t="01/01/2013" exposure="1100.0" /&gt;
        &lt;/data&gt;
      &lt;/asset&gt;
    &lt;/obligor&gt;
  &lt;/portfolio&gt;
    </pre>

    <h3>Portfolio Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">include</td>
        <td class="c2">
          Indicates the filepath to portfolio file relative to the main input file location. 
          The format of the portfolio file is exactly the same of the section 
          portfolio where the root tag of this file is <code>portfolio</code>. This attribute is optional. 
          If your portfolio is large and you plan to simulate it multiple times using distinct 
          parameters use this feature, otherwise this attribute can be omitted.
        </td>
        <td class="c3">string</td>
      </tr>
    </table>

    <h3>Obligor Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">id</td>
        <td class="c2">
          Unique obligor identifier.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">rating</td>
        <td class="c2">
          Initial obligor credit rating at time t0, see attribute <i>time.0</i> at the 
          <a href="#parameters">parameters</a> section. This value must be a credit rating 
          identifier, see 'name' attribute in <a href="#ratings">rating</a> tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="b">
        <td class="c1">factor</td>
        <td class="c2">
          Factor where this obligor is included.
          This value must be a factor identifier, see 'name' attribute in factor tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">recovery</td>
        <td class="c2">
          Default recovery used in absence of recovery in the description of assets.
          Recovery can be a fixed value or a probability distribution. In the first case, 
          the fixed value can be set as percentage (eg. 5.3%) or absolute value (eg. 0.053).
          In the second case, you can model recovery using the following distributions:<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Beta_distribution">beta(&alpha;,&beta;)</a>, where &alpha; &gt; 0 and &beta; &gt; 0<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29">uniform(a,b)</a>, where 0 &le; a &lt; b &le; 1<br/>
          This attribute is optional.
        </td>
        <td class="c3">double<br/>string</td>
      </tr>
    </table>

    <h3>Belongs-To Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">segmentation</td>
        <td class="c2">
          Segmentation identifier.
          This value must be a segmentation identifier, see 'name' attribute in segmentation tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">segment</td>
        <td class="c2">
          Segment identifier.
          This value must be a segment identifier, see 'name' attribute in segment tag.
        </td>
        <td class="c3">string</td>
      </tr>
    </table>

    <h3>Asset Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">id</td>
        <td class="c2">
          Unique asset identifier.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">date</td>
        <td class="c2">
          Date (in format 'DD/MM/YYYY') from wich there is credit risk, eg. bond
          buy date or loan signature.
        </td>
        <td class="c3">date</td>
      </tr>
      <tr class="b">
        <td class="c1">recovery</td>
        <td class="c2">
          Default recovery used in absence of recovery in the description of assets.
          Recovery can be a fixed value or a probability distribution. In the first case, 
          the fixed value can be set as percentage (eg. 5.3%) or absolute value (eg. 0.053).
          In the second case, you can model recovery using the following distributions:<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Beta_distribution">beta(&alpha;,&beta;)</a>, where &alpha; &gt; 0 and &beta; &gt; 0<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29">uniform(a,b)</a>, where 0 &le; a &lt; b &le; 1<br/>
          This attribute is optional.
        </td>
        <td class="c3">double<br/>string</td>
      </tr>
    </table>

    <h3>Values Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">t</td>
        <td class="c2">
          Date where the values take place.
          Can be a date (in format 'DD/MM/YYYY') bigger or equal than asset date or an interval 
          from asset date. Use suffix 'D' to indicate days (eg. 3D), suffix 'M' to indicate months 
          (eg. 6M) and suffix 'Y' to indicate years (eg. 15Y). 
        </td>
        <td class="c3">date<br/>int[DMY]</td>
      </tr>
      <tr class="a">
        <td class="c1">exposure</td>
        <td class="c2">
          Esposure at date "t". Amount that lender can lose in case of obligor's default 
          on the indicated date. Exposure can be a fixed value or a probability distribution. 
          In the first case, set the numeric value that represents the exposure (eg. 50000). 
          In the second case, you can model recovery using the following distributions:<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Log-normal_distribution">lognormal(&mu;,&sigma;)</a>, where &mu; &gt; 0 and &sigma; &gt; 0<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Exponential_distribution">exponential(&beta;)</a>, where &beta; &gt; 0 is the <a href="http://en.wikipedia.org/wiki/Exponential_distribution#Alternative_parameterization">survival parameter</a><br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29">uniform(a,b)</a>, where a &gt; 0 and b &gt; 0<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Gamma_distribution">gamma(k,&rho;)</a>, where k &gt; 0 and &rho; &gt; 0<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Normal_distribution">normal(&mu;,&sigma;)</a>, where &mu; &gt; 0 and &sigma; &gt; 0. Values less than 0 are truncated to 0.<br/>
        </td>
        <td class="c3">double<br/>string</td>
      </tr>
      <tr class="b">
        <td class="c1">recovery</td>
        <td class="c2">
          The portion of loss that will be recovered in case of default at date "t". 
          This value takes into account guarantees, the cost to take legal actions, 
          recovery rate based on historical data, etc.
          Recovery can be a fixed value or a probability distribution. In the first case, 
          the fixed value can be set as percentage (eg. 5.3%) or absolute value (eg. 0.053).
          In the second case, you can model recovery using the following distributions:<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Beta_distribution">beta(&alpha;,&beta;)</a>, where &alpha; &gt; 0 and &beta; &gt; 0<br/>
          &nbsp;&nbsp;&bull; <a href="http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29">uniform(a,b)</a>, where 0 &le; a &lt; b &le; 1<br/>
        </td>
        <td class="c3">double<br/>string</td>
      </tr>
    </table>

<!-- ==================================================== -->
<!--    Notes                                             -->
<!-- ==================================================== -->
	<br/>
    <a name="notes"></a>
    <h1>Additional Notes</h1>

<!-- ==================================================== -->
<!--    default probabilities section                     -->
<!-- ==================================================== -->
    <a name="dprobs"></a>
    <h2>Default Probability Functions</h2>

    <p>
      Default probabilities along the time are difficult to obtain, for 
      this reason it is better to work with the transition matrix. 
      Ccruncher will take care to convert the transition matrix in the 
      corresponding default probability functions. This implies that 
      the credit rating transitions follow a Markov model. Sometimes 
      this assumption is not acceptable because we desire that transition 
      probabilities change over the simulation period or we plan to do 
      stress tests over the default probabilities. In these cases you can 
      define the default probability functions explicitly.
    </p>

    <p>
      You must define either a transition matrix or the default probability
      functions, but not both. The <code>dprobs</code> section contains the 
      default probability function for each rating. If this 
      section is non provided, the default probability functions will be computed 
      using the transition matrix. You don't need to fill all time values. 
      For all credit ratings (distinct than the defaulted rating) the default 
      probability function is monotonously increasing, with a value of 0 at time 0, 
      and a value of 1 at time &infin;. The default probability function of 
      the defaulted rating is always 1.
    </p>
    <p>
      The default probability functions are approximated using cubic splines
      when possible (minimum number of available points, monotone increasing) 
      and linear splines when not.
    </p>

    <h3>Example</h3>

    <pre>

  &lt;dprobs&gt;
    &lt;dprob rating="AAA" t="0M" value="0.0%"/&gt;
    &lt;dprob rating="AA" t="0M" value="0.0%"/&gt;
    &lt;dprob rating="A" t="0M" value="0.0%"/&gt;
    &lt;dprob rating="BBB" t="0M" value="0.0%"/&gt;
    &lt;dprob rating="BB" t="0M" value="0.0%"/&gt;
    &lt;dprob rating="B" t="0M" value="0.0%"/&gt;
    &lt;dprob rating="CCC" t="0M" value="0.0%"/&gt;
    &lt;dprob rating="D" t="0M" value="100.0%"/&gt;

    &lt;dprob rating="AAA" t="6M" value="0.04%"/&gt;
    &lt;dprob rating="AA" t="6M" value="1.46%"/&gt;
    &lt;dprob rating="A" t="6M" value="2.81%"/&gt;
    &lt;dprob rating="BBB" t="6M" value="4.02%"/&gt;
    &lt;dprob rating="BB" t="6M" value="7.37%"/&gt;
    &lt;dprob rating="B" t="6M" value="14.28%"/&gt;
    &lt;dprob rating="CCC" t="6M" value="21.12%"/&gt;
    &lt;dprob rating="D" t="6M" value="100.0%"/&gt;
    ...
  &lt;/dprobs&gt;
    </pre>

    <h3>Dprob Attributes</h3>

    <table cellpadding="3">
      <tr class="a">
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
      </tr>
      <tr class="b">
        <td class="c1">rating</td>
        <td class="c2">
         This value must be a credit rating identifier, see 'name' attribute in the 
         rating tag.
        </td>
        <td class="c3">string</td>
      </tr>
      <tr class="a">
        <td class="c1">t</td>
        <td class="c2">
          Time. Can be a date (in format 'DD/MM/YYYY') bigger or equal than <i>time.0</i> 
          or an interval from starting date <i>time.0</i>. Use suffix 'D'
          to indicate days (eg. 3D), suffix 'M' to indicate months (eg. 6M) and  
          suffix 'Y' to indicate years (eg. 15Y).
        </td>
        <td class="c3">date<br/>int[DMY]</td>
      </tr>
      <tr class="b">
        <td class="c1">value</td>
        <td class="c2">
          Probability that an obligor with initial rating <i>rating</i> 
          defaults in the time range <i>[0,t]</i>. It must have a value 
          between 0 and 1. The value can be set as percentage (eg. 5.3%) or 
          absolute value (eg. 0.053).
        </td>
        <td class="c3">double</td>
      </tr>
    </table>

    <div id="page-footer">
      <table style="width:100%; height:100%"><tr>
        <td style="width:100%; text-align:center;">
          Copyright &copy; 2004-2013 - <a href="mailto:gtorrent@ccruncher.net">CCruncher</a>
        </td>
        <td style="white-space:nowrap; text-align:right; font-weight:bold; padding-right:10px;">
          Last modified: 04-Jan-2013
        </td>
      </tr></table>
    </div>

  </div>
  </body>
</html>
